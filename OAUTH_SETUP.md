# Getting OAuth Credentials - Step by Step

Follow these steps to get OAuth credentials for Google Classroom API.

---

## Option 1: Automated Script (Recommended)

Run the setup script:

```bash
cd ~/GitHub/classroom-mcp
./setup-oauth.sh
```

This will guide you through:
1. gcloud authentication
2. Project selection
3. Enabling Classroom API
4. OAuth consent screen setup
5. Creating OAuth credentials
6. Generating token

---

## Option 2: Manual Steps

### Step 1: Authenticate with gcloud

```bash
gcloud auth login
```

Opens browser for Google sign-in.

### Step 2: Set Project

```bash
# List your projects
gcloud projects list

# Set the project you want to use
gcloud config set project YOUR_PROJECT_ID
```

Current project: `terpedia`

### Step 3: Enable Classroom API

```bash
gcloud services enable classroom.googleapis.com
```

### Step 4: Configure OAuth Consent Screen

1. Go to: https://console.cloud.google.com/apis/credentials/consent
2. Select your project: `terpedia`
3. Choose user type:
   - **Internal** (if using Google Workspace)
   - **External** (for personal/Gmail accounts)
4. Fill in app information:
   - **App name:** classroom-mcp
   - **User support email:** [your email]
   - **Developer contact:** [your email]
5. Click **Save and Continue**
6. **Scopes:** Click **Save and Continue** (we'll add scopes in credentials)
7. **Test users** (External only): Add your email
8. Click **Back to Dashboard**

### Step 5: Create OAuth Client ID

1. Go to: https://console.cloud.google.com/apis/credentials
2. Click **Create Credentials** ‚Üí **OAuth client ID**
3. Application type: **Desktop app**
4. Name: **classroom-mcp**
5. Click **Create**
6. Click **Download JSON**
7. Save as: `~/GitHub/classroom-mcp/credentials.json`

**Important:** The file must be named exactly `credentials.json` in the classroom-mcp directory.

### Step 6: Generate Token

```bash
cd ~/GitHub/classroom-mcp
node auth.js
```

This will:
1. Open browser for authorization
2. Ask you to sign in with Google
3. Show authorization code
4. Paste code into terminal
5. Generate `token.json`

### Step 7: Restart Cursor

Quit and reopen Cursor to load the MCP server.

---

## Quick Commands

```bash
# Check current gcloud setup
gcloud config list

# Check if Classroom API is enabled
gcloud services list --enabled | grep classroom

# View current project
gcloud config get-value project

# Switch project
gcloud config set project YOUR_PROJECT_ID
```

---

## Expected File Locations

After setup, you should have:

```
~/GitHub/classroom-mcp/
‚îú‚îÄ‚îÄ credentials.json    ‚Üê OAuth client credentials (you download this)
‚îú‚îÄ‚îÄ token.json          ‚Üê Generated by auth.js
‚îú‚îÄ‚îÄ auth.js            ‚Üê Authentication script
‚îú‚îÄ‚îÄ dist/              ‚Üê Built MCP server
‚îî‚îÄ‚îÄ ...
```

---

## Troubleshooting

### "gcloud: command not found"

Install Google Cloud SDK:
```bash
# macOS
brew install google-cloud-sdk

# Or download from: https://cloud.google.com/sdk/docs/install
```

### "API not enabled"

Enable manually:
```bash
gcloud services enable classroom.googleapis.com --project=YOUR_PROJECT_ID
```

### "OAuth consent screen not configured"

Complete Step 4 above. You must configure the consent screen before creating OAuth credentials.

### "redirect_uri_mismatch" error

The Desktop app credentials should work. If you see this error:
1. Delete credentials.json
2. Create new credentials with type "Desktop app" (not "Web application")
3. Download and try again

### Can't find downloaded credentials

The default download location is usually:
- macOS: `~/Downloads/client_secret_*.json`
- Rename and move to: `~/GitHub/classroom-mcp/credentials.json`

---

## Testing

After setup, test in Cursor AI chat:

```
List my Google Classroom courses
```

If successful, you'll see your courses or an empty list (if you haven't created any yet).

---

## Next Steps

1. ‚úÖ Get credentials (this guide)
2. ‚úÖ Generate token (`node auth.js`)
3. ‚úÖ Restart Cursor
4. üéØ Create AIN 2001 course
5. üéØ Create 24 assignments

See `QUICKSTART.md` for creating the course and assignments.
